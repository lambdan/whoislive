<html>
<head>
<title>whoislive auth</title>
<style>
body {
    font-family: sans-serif;
    color: black;
    font-size: 1.3em;
    max-width: 800px;
    }
a {
text-decoration: none;
color: black;
}
pre {
color: #6441A4;
font-weight: bold;
}
</style>
<meta charset="utf-8">
<script>
function key() {
    //var url = window.location;
    //var token = window.location.hash.replace("#access_token=","");
    //token = token.substr(0, token.indexOf('&scope'));
    
    //var token = window.location.hash.split('=')[1];

    var token = new URL(window.location).hash.split('&').filter(function(el) { if(el.match('access_token') !== null) return true; })[0].split('=')[1];


     var x = "<p>Your token is:</p> <pre>" + token + "</pre><p>Paste it in the whoislive window.</p>";
    document.getElementById("code").innerHTML = x;
     }


</script>

<body onload="key()">
<h1>whoislive Auth Page</h1>
<div id="code"></div>
<hr>
<h3>Not seeing a token key or just "undefined"?</h3>
<p>Try another browser. Safari 10.1 on Mac is known not to work, as it doesn't keep hashes during redirects. Try Chrome or another browser just for this occasion in that case.
</p>

<p><a href="https://github.com/lambdan/whoislive">github.com/lambdan/whoislive</a></p>
</body>

</html>

